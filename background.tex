\chapter{Background and Related Work} \label{chap:background}
Providing a complete history of map and globe making (cartography) is much beyond both the scope and ability of this thesis.
Instead, we provide a brief background to illuminate how these disciplines influenced the developments of Digital Earth systems.
We discuss the different approaches for a Digital Earth, starting with traditional GIS and then discussing techniques used for globe based systems and analysis.
We also provide background and related work on discrete global grids and grid systems, looking at different methods for constructing both 2D and 3D versions of these data structures.


\section{Traditional Maps and Globes}
Cartography, the study and practice of making maps, is a mature and diverse discipline.
While there is no agreement on the earliest known map, there exist samples dating to the 4th millennium BCE and surviving world maps from 9th century BCE Babylonia.
While one may think of maps primarily as a navigation tool, the uses extend much further.
Maps allow geospatial data (data with an associated geographic component) to be encoded, processed, and visualized in a scale reference.
Therefore, any field or discipline using such data often also uses maps of said data.


In the 3rd century BCE, the ancient Greeks established that the Earth is spherical; with this came the first globes of Earth.
Globes serve a similar purpose as maps; however, the use of a spherical reference as opposed to a planar one provides a more accurate representation of the Earth.
Despite this, maps were---and continue to be---the primary medium for representing the Earth and geospatial data~\cite{hruby20182000}.
Compared to maps, globes are more expensive to manufacture and more difficult to store, transport, and make measurements on.
Maps can also represent the entire Earth in one view and easily accommodate any scale.


\subsection{Map Projections}
The above benefits of a flat map over a globe do not come without their disadvantages
Producing a map requires flattening the spherical Earth to a flat plane---an operation known as map projection (or simply projection)---which introduces inevitable distortions and map edges.
These issues are not present on globes, and because of this, they provide a more accurate representation of the Earth than is possible with any map.
Despite these fundamental challenges, the many benefits of maps have motivated the use and study of these operations~\cite{snyder1987map, snyder1997flattening}.


Distortions in a map projection (or more generally in any mapping) are measured by their effect on angles, areas, and distances.
While eliminating all distortion is impossible, specialized projection methods exist that remove certain types of distortion.
Commonly used conformal [] and area-preserving [] projections preserve angles and areas, respectively.
Preserving distance also removes all other distortion, and since the sphere in non-developable, isometric projections between the sphere and the plane are impossible.
However, projections that preserve only certain distances, such as all those to a certain point, are achievable. []
Alternatively, some methods aim for a balanced trade-off between the different types of distortion, as opposed to eliminating a specific type. []
\cite{mathematics paper on distortion}
\cite{planar area preserving}
\cite{planar conformal}


Since distortion cannot be completely removed, measurements and analyses done on flat maps can produce errors.
Straight lines may not map to the actual shortest path, distortions of area may misrepresent the density of phenomena, and locations may appear much closer together or farther apart than they genuinely are.
The amount and type of errors depend both on the projections used and the type of analysis performed, with certain maps being better suited for certain operations.
For example, the Mercator projection---designed for navigation---maps straight lines to rhumb lines.
However, the severely distorted area makes this projection a poor choice for representing the frequency of earthquakes in different regions.
It is, therefore, essential to use an appropriate map projection for each intended use case, with no one projection being ideal in all circumstances.


Another significant challenge with flat maps is the edges (or boundaries) introduced.
Such edges can have a significant impact on a person's understanding of a map when phenomena cross these boundaries.
A study by Hennerdal asked participants to predict the location and direction of an airplane crossing the boundary of different map projections~\cite{hennerdal2015beyond}.
The study found that participants would often incorrectly place the airplane at the point of \textit{linear} peripheral continuity (the intersection of the straight line tangent to the initial aircraft location and the opposite map edge) as opposed to the correct location.
The occurrence of this mistake decreased with age; however, the effect was still prominent and significant with adult participants. Another study by Hruby et al. measured how such edges impact the estimation of distance~\cite{hruby2016journey}.
Two groups of participants, given either a Eurocentric or Americentirc map, were asked to estimate the distance between various Asian and American cities.
While both groups overestimated distances on average, the group with the Americentric map (where the shortest distances crossed the map boundary), had larger estimation errors than the other group.
These studies further show that the projection used for a map must be chosen and centred carefully to ensure readers correctly understand how the map relates to the actual Earth.


\subsubsection{Polyhedral Projections}
At the cost of introducing additional map edges, cutting a map can reduce the amount of distortion introduced by projection~\cite{soliman2018optimal}.
Such cuts are analogous to projecting the sphere to an underlying polyhedron, the net of which produces the final flat map.
Aside from reducing distortion, this type of map can serve as a pseudo-globe by folding the net into the corresponding polyhedron.


As will be discussed later, this class of projection methods is also a core component of any polyhedron based discretization of the Earth.
Since equal-area cells are often desired for such discretizations, many area-preserving projections between the sphere and various polyhedron have been developed~\cite{bradley1946equal, snyder1992equal, van2006slice, rocsca2011uniform, rocsca2012area, holhocs2014octahedral}.
There has also been work to improve the efficiency of these projections for use with Digital Earth systems~\cite{harrison2011optimization}.


\section{Digital Earth Systems}
With the advent of computing systems came the move of maps from the physical domain to the digital one.
Initially, this required scanning existing physical maps to digitize the data they contained.
As the prevalence of computers increased, more geospatial data was stored natively in digital formats.
Nowadays, nearly all (if not all) geospatial data is collected and stored digitally.
Furthermore, advancements in remote sensing technologies, smart technologies, and the Internet of things have lead to explosive increases in the amount of geospatial data collected.
Modern computers can process vast amounts of data compared to what is possible manually; despite this, the volume and complexity of geospatial data available and being collected surpasses even this capacity~\cite{lee2015geospatial}.


To make full use of the geospatial data gathered by society, former US vice president Al Gore proposed the idea of a Digital Earth~\cite{gore1998}.
This Digital Earth---a 3D virtual globe---would serve as a common reference for the vast majority of geospatial data to be freely accessible by the public.
This vision has since been further refined to be not one, but several connected Digital Earths that individually better meet the needs of specific audiences~\cite{goodchild2012next}.
Currently, many different systems exist for creating a Digital Earth with significant variations in methodology, scope, and intended use(s).



\subsection{Geographic Information Systems}
Long before Al Gore's idea of a Digital Earth, traditional cartography techniques were being applied to create systems for creating and managing digital maps.
These technologies became what is known today as GIS.
Just as with physical maps, in a GIS, different datasets are represented as individual layers in a planar coordinate system.
Different layers can then be integrated and analyzed through combinations of set operations (union, intersection, and difference), statistical analysis (such as mean and standard deviation), and other operations.
This integration and analysis are also used to create visualizations of the underlying data.



Digital Earth based on principles and techniques of traditional geography.
Based on 2D maps.
Use map ``layers'' to represent different data sets.
Layers can be combined and used for different analysis, visualizations, etc.
Distortion can cause errors in this analysis; must use spherical analysis sometimes to avoid this.
Most systems require some amount of user expertise to clean, integrate, process data.
\cite{antenucci1991geographic}
\cite{foresman1998history}


\subsection{Globe Based Digital Earth}
Use globe as reference model as opposed to flat map.
Two approaches:
(1) use underlying flat representation and map to globe for visualization.
Does not solve issues of distortion for analysis purposes, only visualization.
\cite{mahdavi2015survey}
\cite{alderson2020digital}
\cite{goodchild2018reimagining}


Other approach is to do analysis directly in spherical or ellipsoidal space.
More computational expensive than planar equivalents, but much more accurate.
Ellipsoidal is challenging due to issues of elliptic integrals; various well known techniques for sphere however.
Raskin paper, Troy's papers, points on sphere paper, maybe others.
\cite{raskin1994spatial}
\cite{bahrdt2017rational}
\cite{alderson2016multiresolution}
\cite{alderson2019multiscale}
\cite{alderson2018offsetting}


\section{Discrete Global Grids}
Spatial partitioning structures have long been used in computer graphics for managing spatial information.
Reasons and benefits of such.
Same techniques can be used for geospatial data.
Uses of global grids varies.
From structure for speeding up queries to foundation for entire Digital Earth system (pyxis/ggs) as alternative to GIS system.
However DGG can also be used in tandem with traditional GIS technologies.
Many different techniques exist for creating such grids (and by extension grid systems).
\cite{sahr1998discrete}
\cite{sahr2003geodesic}


\subsection{Discrete Global Grid Systems}
A discrete global grid only represents Earth at one spatial resolution.
Geospatial data comes in large range of resolutions.
This can be addressed by creating a hierarchy of DGG's.
This hierarchy is what we call a DGGS.


\subsubsection{Refinement}
Start with initial discretization and then refine.
Discretization can be any DGG.


The refinement method of a DGGS defines the process by which a set of fine cells are produced from a set of coarse cells.
This should be done in a consistent manner such that it can be applied successively to create increasingly fine discretizations of the Earth.
These refinement schemes are classified by their input cell shape(s), which are given by the initial discretization; output cell shape(s), which are usually the same as the input; and their refinement factor, which is simply the ratio between the number of coarse cells and fine cells.
For example, triangle 1-to-4 (1:4) refinement produces four triangle cells for each triangle in the set of coarse cells.
The refinement factor determines how quickly the resolution of the grid increases with each application of the refinement method.


Refinement vs. subdivision: Both terms appear in the literature.
In computer graphics, subdivision typically refers to subdivision surfaces which involve repositioning vertices.
To avoid confusion, this thesis will use the term refinement to refer to the process of creating a set of children cells from parent cells.


\subsection{Spherical Grids}
Lat-long grids.
Semiregular/igloo lat-long grids (DQG).
Small circle arc grids.
Yin-yang grid.
\cite{leopardi2006partition}
\cite{sun2008global}
\cite{song2002developing}
\cite{kageyama2004yin-yang}


\subsection{Polyhedral Grids}
Main idea is to use polyhedron as approximation for sphere.
Polyhedral projection as described earlier maps spherical domain to polyhedral one.
Avoids polar degeneracies.
Area preserving projections allow equal area cells without significantly reducing compactness.
\cite{fekete1990sphere}
\cite{dutton1996encoding}
\cite{gorski2005healpix}
\cite{holhocs2014octahedral}
\cite{mahdavi2013one} % TODO ???
\cite{mahdavi2015hexagonal} % TODO ???


\subsection{3D Grids}
Same as regular grids but with altitude dimension.
Can be made from any of the above by extrusion method.
Lat-long -> 3D LLG -> GeoSOT3D.
Yin-yang -> 3D yin-yang.
Polyhedral -> frustum/prismatoid.
\cite{yoo2019concept}
\cite{sun20153d}
\cite{yoshida2004application}
\cite{kageyama2005geodynamo}
\cite{tackley2008modelling}


Issue of radial degeneration---see Chapter 3.something
Methods have been proposed that use method similar to igloo in radial dimension.
DQG -> SDOG.
SSS 3DG.
\cite{yu2009sdog}
\cite{yu2012large-scale}
\cite{yu2012lithosphere}
\cite{gang2013sphere} 
\cite{wang2013global}


\subsection{Grid Encoding and Decoding}
Need to map data/features to grid cells.
Most simple encoding is for points: find cell that contains point.
Inverse also needed: take cell and get geometry on reference model.
Call these encoding and decoding.
As part of this, need way to refer to cells uniquely.
\cite{du2018duality}


\subsubsection{Indexing Scheme} \label{sec::dggs:indexing}
For grid and cell geometries to be useful as a DGGS, a mechanism for assigning a unique index to each cell is needed.
Earth data is assigned to cells using these indices, which allows for efficient retrieval of all data associated with a specific cell or region of the Earth.
Thus, in order to be able to insert new data into the grid efficiently, it is important to be able to quickly determine the cell (and associated index) that contains a point on the Earth after it has been projected.
Likewise, given a cell index, it is important to be able to determine the geometry of the corresponding cell in the grid.
This geometry can then be inverse projected to find the region of the Earth associated with the cell.
These indices also allow for certain spatial relationship queries to be defined, such as the retrieval of neighbouring cells, and can be used to navigate up and down the hierarchy of the grid via parent and child relationships between cells in different resolutions.
\cite{yu2009coding}
\cite{vince2006indexing}
\cite{tong2013efficient}
\cite{mahdavi2015categorization}


\section{Summary}
Maps and globes have been around for thousands of years.
With advent of computer, GIS was born which carried over conventions of traditional cartography.
Recently, global grids have become popular as a replacement/augmentation of GIS.
Many different approached for DGG and DGGS.
3D DGGS are the next step of this evolution; techniques exist but still underdeveloped comparatively.
